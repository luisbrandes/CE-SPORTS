{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/eumig/CE-SPORTS/web/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\r\nimport { cn } from \"@/lib/utils\"\r\n\r\nexport function Card({ className, ...props }: React.HTMLAttributes<HTMLDivElement>) {\r\n  return (\r\n    <div\r\n      className={cn(\r\n        \"rounded-xl border border-border bg-card p-4 shadow-sm transition hover:shadow-md\",\r\n        className\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;;;AAEO,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAA6C;IAChF,qBACE,qQAAC;QACC,WAAW,IAAA,yIAAE,EACX,oFACA;QAED,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 26, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/eumig/CE-SPORTS/web/app/%28app%29/campeonatos/historico-partidas/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState, useMemo } from \"react\";\r\nimport Link from \"next/link\";\r\nimport { Card } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\n\r\ntype ApiEquipe = {\r\n  id?: number;\r\n  nome?: string;\r\n};\r\n\r\ntype ApiCampeonato = {\r\n  id?: number;\r\n  nome?: string;\r\n};\r\n\r\ntype ApiPartidaRaw = {\r\n  id?: number;\r\n  campeonato?: ApiCampeonato | string;\r\n  equipe1?: ApiEquipe | string;\r\n  equipe2?: ApiEquipe | string;\r\n  pontuacao1?: number | string | null;\r\n  pontuacao2?: number | string | null;\r\n  empate?: boolean;\r\n  vencedor?: ApiEquipe | string | null;\r\n  data?: string | null;\r\n};\r\n\r\nexport default function PartidasPage() {\r\n  const [partidas, setPartidas] = useState<ApiPartidaRaw[] | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const normalizeName = (\r\n    value: ApiEquipe | ApiCampeonato | string | undefined | null\r\n  ) => {\r\n    if (!value) return \"-\";\r\n    if (typeof value === \"string\") return value;\r\n    return (value as any).nome ?? \"-\";\r\n  };\r\n\r\n  const normalizeScore = (\r\n    val: number | string | undefined | null\r\n  ): number | null => {\r\n    if (val === null || val === undefined) return null;\r\n    if (typeof val === \"number\") return val;\r\n    const n = Number(val);\r\n    return Number.isNaN(n) ? null : n;\r\n  };\r\n\r\n  const fetchPartidas = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    setPartidas(null);\r\n    const candidates = [\"/api/partida\"];\r\n    let lastError: any = null;\r\n\r\n    for (const url of candidates) {\r\n      try {\r\n        const res = await fetch(\"http://localhost:8080/api/partida\", {\r\n          method: \"GET\",\r\n          cache: \"no-store\",\r\n        });\r\n        if (!res.ok) {\r\n          lastError = `endpoint ${url} retornou ${res.status}`;\r\n          continue;\r\n        }\r\n        const json = await res.json();\r\n        const arr = Array.isArray(json)\r\n          ? json\r\n          : json?.data ?? json?.content ?? json?.partidas ?? null;\r\n        if (!arr || !Array.isArray(arr)) {\r\n          lastError = `endpoint ${url} retornou formato inesperado`;\r\n          continue;\r\n        }\r\n        const normalized = arr.map((p: ApiPartidaRaw) => ({\r\n          ...p,\r\n          pontuacao1: normalizeScore(p.pontuacao1 as any),\r\n          pontuacao2: normalizeScore(p.pontuacao2 as any),\r\n        }));\r\n        setPartidas(normalized);\r\n        setLoading(false);\r\n        return;\r\n      } catch (e) {\r\n        lastError = e;\r\n      }\r\n    }\r\n\r\n    setLoading(false);\r\n    setError(\r\n      `Não foi possível obter partidas: ${\r\n        typeof lastError === \"string\"\r\n          ? lastError\r\n          : (lastError && lastError.message) || \"erro desconhecido\"\r\n      }. Verifique o endpoint da API.`\r\n    );\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchPartidas();\r\n  }, []);\r\n\r\n  const sortedPartidas = useMemo(() => {\r\n    if (!partidas) return null;\r\n    return [...partidas].sort((a, b) => {\r\n      const aDate = a.data ? Date.parse(a.data) : NaN;\r\n      const bDate = b.data ? Date.parse(b.data) : NaN;\r\n      if (!Number.isNaN(aDate) && !Number.isNaN(bDate)) return bDate - aDate;\r\n      if (!Number.isNaN(aDate)) return -1;\r\n      if (!Number.isNaN(bDate)) return 1;\r\n      const aId = a.id ?? 0;\r\n      const bId = b.id ?? 0;\r\n      return bId - aId;\r\n    });\r\n  }, [partidas]);\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background text-foreground py-8\">\r\n      <div className=\"container mx-auto px-4\">\r\n        <div className=\"flex items-center justify-between mb-6\">\r\n          <div>\r\n            <h1 className=\"text-2xl font-bold text-black\">\r\n              Histórico de Partidas\r\n            </h1>\r\n          </div>\r\n\r\n          <div className=\"flex items-center gap-3\">\r\n            <Link href=\"/campeonatos\">\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                className=\"border-blue-600 text-blue-600 hover:bg-blue-50\"\r\n              >\r\n                ← Voltar para Campeonatos\r\n              </Button>\r\n            </Link>\r\n\r\n            <Button\r\n              variant=\"outline\"\r\n              size=\"sm\"\r\n              onClick={() => {\r\n                fetchPartidas();\r\n              }}\r\n            >\r\n              Refresh\r\n            </Button>\r\n\r\n            <Link href=\"/campeonatos/registrar-partida\">\r\n              <Button\r\n                variant=\"outline\"\r\n                size=\"sm\"\r\n                className=\"border-blue-600 text-blue-600 hover:bg-blue-50 px-5\"\r\n              >\r\n                ➕ Nova Partida\r\n              </Button>\r\n            </Link>\r\n          </div>\r\n        </div>\r\n\r\n        <Card className=\"p-4\">\r\n          {loading && (\r\n            <div className=\"py-8 text-center\">Carregando partidas...</div>\r\n          )}\r\n\r\n          {!loading && error && (\r\n            <div className=\"py-6\">\r\n              <div className=\"text-red-600 mb-2\">Erro: {error}</div>\r\n              <div className=\"text-sm text-muted-foreground mb-4\">\r\n                Se a API não estiver pronta, você pode usar dados mock:\r\n              </div>\r\n              <div className=\"flex gap-2\">\r\n                <Button variant=\"outline\" onClick={() => fetchPartidas()}>\r\n                  Tentar novamente\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {!loading && sortedPartidas && sortedPartidas.length === 0 && (\r\n            <div className=\"py-8 text-center text-muted-foreground\">\r\n              Nenhuma partida encontrada.\r\n            </div>\r\n          )}\r\n\r\n          {!loading && sortedPartidas && sortedPartidas.length > 0 && (\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"min-w-full text-sm\">\r\n                <thead className=\"bg-blue-600 text-white\">\r\n                  <tr>\r\n                    <th className=\"p-2 text-left\">Campeonato</th>\r\n                    <th className=\"p-2 text-left\">Equipe 1</th>\r\n                    <th className=\"p-2 text-left\">Equipe 2</th>\r\n                    <th className=\"p-2 text-left\">Placar</th>\r\n                    <th className=\"p-2 text-left\">Resultado</th>\r\n                    <th className=\"p-2 text-left\">Data</th>\r\n                  </tr>\r\n                </thead>\r\n\r\n                <tbody>\r\n                  {sortedPartidas.map((p, idx) => {\r\n                    const camp = normalizeName(p.campeonato);\r\n                    const e1 = normalizeName(p.equipe1);\r\n                    const e2 = normalizeName(p.equipe2);\r\n                    const g1 = p.pontuacao1 ?? null;\r\n                    const g2 = p.pontuacao2 ?? null;\r\n\r\n                    const left = g1 === null ? \"-\" : String(g1);\r\n                    const right = g2 === null ? \"-\" : String(g2);\r\n                    const placarDisplay =\r\n                      g1 === null && g2 === null\r\n                        ? \"Pendente\"\r\n                        : `${left} × ${right}`;\r\n\r\n                    let resultado = \"-\";\r\n                    if (p.empate) resultado = \"Empate\";\r\n                    else if (p.vencedor) resultado = normalizeName(p.vencedor);\r\n                    else if (typeof g1 === \"number\" && typeof g2 === \"number\") {\r\n                      if (g1 > g2) resultado = e1;\r\n                      else if (g2 > g1) resultado = e2;\r\n                      else resultado = \"—\";\r\n                    }\r\n\r\n                    const dataStr = p.data\r\n                      ? new Date(p.data).toLocaleString(\"pt-BR\")\r\n                      : \"-\";\r\n\r\n                    return (\r\n                      <tr\r\n                        key={p.id ?? idx}\r\n                        className=\"border-t border-border hover:bg-muted/30 transition\"\r\n                      >\r\n                        <td className=\"p-2 text-black\">{camp}</td>\r\n                        <td className=\"p-2\">{e1}</td>\r\n                        <td className=\"p-2\">{e2}</td>\r\n                        <td className=\"p-2 font-medium\">{placarDisplay}</td>\r\n                        <td className=\"p-2\">{resultado}</td>\r\n                        <td className=\"p-2\">{dataStr}</td>\r\n                      </tr>\r\n                    );\r\n                  })}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          )}\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}